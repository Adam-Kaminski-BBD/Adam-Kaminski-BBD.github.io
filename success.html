<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
    //     console.log(window.location.search.substr(6))
    //     fetch('https://github.com/login/oauth/access_token', {
    //     method: 'POST',
    //     headers: {
    //         "Origin":"https://adam-kaminski-bbd.co.za/success.html",
    //         'Accept': 'application/json',
    //         'Access-Control-Allow-Origin':'*',
    //         'Content-Type': 'application/json'
    //     },
    //     body: JSON.stringify({
    //                             "client_id": 'e1dc88c88c7c930809ca',
    //                             "client_secret": "7412882aabb82f2b6f473c0d8ab8a4c70d44e6d7",
    //                             "code": window.location.search.substr(6)})
    // })
    // .then(response => response.json())
    // .then(response => console.log(JSON.stringify(response)))

    const urlParams = new URLSearchParams(window.location.search);  
        function getToken() {
            fetch(
                "https://github.com/login/oauth/access_token", {
                    method: "POST",
                    headers: {
                        'Accept': 'application/json'},
                    body: JSON.stringify({
                        "client_id": "e1dc88c88c7c930809ca",
                        "client_secret": "7412882aabb82f2b6f473c0d8ab8a4c70d44e6d7",
                        "code": urlParams.get("code")
                    })
                }
            ).then(re => re.json()).then(
                response => {
                    const access_token = response.get("access_token")
                    const accessTokenElem = document.getElementById('access_token');
                    accessTokenElem.innerHTML = "Access Token is: " + access_token;
                    console.log(access_token);
                }
                
            )
        }
        
    </script>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
</body>

</html>